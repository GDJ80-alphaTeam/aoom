<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.alpha.aoom.review.service.ReviewMapper">
	<!-- 컬럼 이름 sql조각 -->
	<sql id="review_col">
		booking_id
       ,room_id
       ,user_id
       ,review_content
       ,review_image
       ,original_name
       ,create_date
	</sql>
	
	<!-- 숙소 리뷰 목록 조회-->
	<select id="list" parameterType="map" resultType="camelCaseMap">
		SELECT 
			*
		FROM (
		    SELECT 
		    	<include refid="review_col"/> 
		    FROM 
		    	review
		    WHERE 
		    	room_id = #{roomId}
		    ORDER BY 
		    	create_date DESC
		) 
		WHERE			
			ROWNUM <![CDATA[>]]> #{beginRow} and ROWNUM <![CDATA[<]]> #{beginRow} +#{rowPerPage} 
	</select>
</mapper>